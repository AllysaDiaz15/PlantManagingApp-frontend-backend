<!DOCTYPE html>
<html class="background">
<head>
    <link rel="stylesheet" href="userstyle.css">
    <title>Login Page</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <div class="wholecontainer">
        <div class="logincontainer">
            <form id="loginForm">
                <div><label>User Name: <input type="text" id="loginUsername"/></label></div>
                <div><label>Password: <input type="password" id="loginPassword"/></label></div>
                <div><input type="submit" value="Sign In"/></div>
            </form>
            <br>
        </div>
    </div>
    </body>

<script>

     // Login
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const user = {
            username: document.getElementById('loginUsername').value,
            password: document.getElementById('loginPassword').value
        };

        const response = await fetch('http://localhost:8080/user/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(user)
        });
        const result = await response.text();
            if (response.ok && result === "Logged in") {
            window.location.href = './plants.html';
        } else {
            alert('Invalid username or password');
        }
    });
</script>
</html>